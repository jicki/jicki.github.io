<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Go学习笔记 - 小炒肉</title><meta name=Description content="Go学习笔记"><meta property="og:title" content="Go学习笔记"><meta property="og:description" content="Go学习笔记"><meta property="og:type" content="article"><meta property="og:url" content="https://jicki.cn/golang-study-note-4-1/"><meta property="og:image" content="https://jicki.cn/logo.png"><meta property="article:published_time" content="2000-01-01T00:00:00+00:00"><meta property="article:modified_time" content="2000-01-01T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jicki.cn/logo.png"><meta name=twitter:title content="Go学习笔记"><meta name=twitter:description content="Go学习笔记"><meta name=application-name content="小炒肉"><meta name=apple-mobile-web-app-title content="小炒肉"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=/images/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://jicki.cn/golang-study-note-4-1/><link rel=prev href=https://jicki.cn/golang-study-note-4-2/><link rel=next href=https://jicki.cn/golang-study-note-3/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Go学习笔记","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/jicki.cn\/golang-study-note-4-1\/"},"genre":"posts","keywords":"golang","wordcount":9940,"url":"https:\/\/jicki.cn\/golang-study-note-4-1\/","datePublished":"2000-01-01T00:00:00+00:00","dateModified":"2000-01-01T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"小炒肉"},"description":"Go学习笔记"}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=小炒肉>小炒肉</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/about/>关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=小炒肉>小炒肉</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/>文章</a><a class=menu-item href=/tags/>标签</a><a class=menu-item href=/categories/>分类</a><a class=menu-item href=/about/>关于</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Go学习笔记</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://jicki.cn title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw"></i>小炒肉</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/golang/><i class="far fa-folder fa-fw"></i>golang</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2000-01-01>2000-01-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 9940 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 20 分钟&nbsp;<span id=/golang-study-note-4-1/ class=leancloud_visitors data-flag-title=Go学习笔记>
<i class="far fa-eye fa-fw"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;次阅读
</span>&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#类型别名和自定义类型>类型别名和自定义类型</a><ul><li><a href=#自定义类型>自定义类型</a></li><li><a href=#类型别名>类型别名</a></li></ul></li><li><a href=#结构体>结构体</a><ul><li><a href=#结构体的定义>结构体的定义</a></li><li><a href=#结构体实例化>结构体实例化</a></li><li><a href=#匿名结构体>匿名结构体</a></li><li><a href=#指针类型的结构体>指针类型的结构体</a></li><li><a href=#取结构体的地址实例化>取结构体的地址实例化</a></li><li><a href=#结构体初始化>结构体初始化</a></li><li><a href=#结构体内存布局>结构体内存布局</a></li><li><a href=#结构体的匿名字段>结构体的匿名字段</a></li><li><a href=#嵌套结构体>嵌套结构体</a></li><li><a href=#嵌套匿名结构体>嵌套匿名结构体</a></li><li><a href=#构造函数>构造函数</a></li><li><a href=#结构体练习题>结构体练习题</a></li></ul></li><li><a href=#方法和接收者>方法和接收者</a><ul><li><a href=#指针类型的接收者>指针类型的接收者</a></li><li><a href=#值接收者>值接收者</a></li><li><a href=#任意类型添加方法>任意类型添加方法</a></li><li><a href=#结构体继承>结构体"继承&rdquo;</a></li><li><a href=#结构体字段的可见性>结构体字段的可见性</a></li><li><a href=#结构体json序列化>结构体JSON序列化</a></li><li><a href=#结构体json-反序列化>结构体JSON 反序列化</a></li><li><a href=#结构体标签-tag>结构体标签 (Tag)</a></li><li><a href=#练习题>练习题</a></li></ul></li></ul></nav></div></div><div class=content id=content><h1 id=go语言基础>Go语言基础</h1><h2 id=类型别名和自定义类型>类型别名和自定义类型</h2><h3 id=自定义类型>自定义类型</h3><ul><li><p>在Go语言中有一些基本的数据类型, 如<code>string</code>、<code>整型</code>、<code>浮点型</code>、<code>布尔</code>等数据类型, Go语言中可以使用<code>type</code>关键字来定义自定义类型。</p></li><li><p>自定义类型是定义了一个全新的类型。我们可以基于内置的基本类型定义, 也可以通过<code>struct</code>定义。</p></li><li><p>类型定义和类型别名的区别: 自定义类型,定义以后输出的类型会输出为 新定义的类型, 而类型别名,在定义以后输出的类型仍然是原类型。</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// Myint 基于 int 的自定义类型
</span><span class=c1></span><span class=kd>type</span> <span class=nx>Myint</span> <span class=kt>int</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
    <span class=c1>// 定义一个 i 变量 类型为 Myint 类型
</span><span class=c1></span>	<span class=kd>var</span> <span class=nx>i</span> <span class=nx>Myint</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;type: %T value: %v \n&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>i</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>type</span><span class=p>:</span> <span class=nx>main</span><span class=p>.</span><span class=nx>Myint</span> <span class=nx>value</span><span class=p>:</span> <span class=mi>0</span>
</code></pre></td></tr></table></div></div><h3 id=类型别名>类型别名</h3><ul><li>类型别名规定: <code>TypeAlias</code>只是<code>Type</code>的别名, 本质上<code>TypeAlias</code>与<code>Type</code>是同一个类型。</li><li>类型别名定义: <code>type TypeAlias = Type</code>。</li><li><code>rune</code>和<code>byte</code>就是类型别名, 它们其实是 <code>type byte = uint8</code>, <code>type rune = int32</code></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// 类型别名
</span><span class=c1>// Aliasint 是 int 的类型别名
</span><span class=c1></span><span class=kd>type</span> <span class=nx>Aliasint</span> <span class=p>=</span> <span class=kt>int</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>(){</span>
	<span class=c1>// 定义一个 a 变量 类型为 Aliasint 类型
</span><span class=c1></span>	<span class=kd>var</span> <span class=nx>a</span> <span class=nx>Aliasint</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;type: %T value: %v \n&#34;</span><span class=p>,</span> <span class=nx>a</span><span class=p>,</span> <span class=nx>a</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>type</span><span class=p>:</span> <span class=kt>int</span> <span class=nx>value</span><span class=p>:</span> <span class=mi>0</span>
</code></pre></td></tr></table></div></div><h2 id=结构体>结构体</h2><ul><li><p>Go语言中的基础数据类型可以表示一些事物的基本属性, 但是当我们想表达一个事物的全部或部分属性时, 这时候再用单一的基本数据类型明显就无法满足需求了, Go语言提供了一种自定义数据类型, 可以封装多个基本数据类型, 这种数据类型叫<code>结构体</code>, 英文名称<code>struct</code>。 也就是我们可以通过<code>struct</code>来定义自己的类型了。</p></li><li><p>Go语言中通过<code>struct</code>来实现面向对象。</p></li></ul><h3 id=结构体的定义>结构体的定义</h3><ul><li>使用<code>type</code>和<code>struct</code>关键字来定义结构体。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>类型名</span> <span class=kd>struct</span> <span class=p>{</span>
    <span class=nx>字段名</span> <span class=nx>字段类型</span>
    <span class=nx>字段名</span> <span class=nx>字段类型</span>
    <span class=err>…</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>说明:<ul><li>类型名: 标识自定义结构体的名称, 在同一个包内不能重复。</li><li>字段名: 表示结构体字段名。结构体中的字段名必须唯一。</li><li>字段类型: 表示结构体字段的具体类型。</li></ul></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// 定义 struct 结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span><span class=p>,</span> <span class=nx>city</span> <span class=kt>string</span>
	<span class=nx>age</span>        <span class=kt>int8</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li><p>如上定义了一个<code>person</code>的自定义类型, 它有<code>name</code>、<code>city</code>、<code>age</code>三个字段, 分别表示姓名、城市和年龄。这样我们使用这个person结构体就能够很方便的在程序中表示和存储人信息了。</p></li><li><p>语言内置的基础数据类型是用来描述一个值的, 而结构体是用来描述一组值的。比如一个人有名字、年龄和居住城市等, 本质上是一种聚合型的数据类型。</p></li></ul><h3 id=结构体实例化>结构体实例化</h3><ul><li><p>只有当结构体实例化时, 才会真正地分配内存。也就是必须实例化后才能使用结构体的字段。</p></li><li><p>结构体本身也是一种类型, 我们可以像声明内置类型一样使用<code>var</code>关键字声明结构体类型。 如: <code>var 结构体实例 结构体类型</code></p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span><span class=p>,</span> <span class=nx>city</span> <span class=kt>string</span>
	<span class=nx>age</span>        <span class=kt>int8</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 定义了一个 p1 变量,类型为 person 类型
</span><span class=c1></span>	<span class=kd>var</span> <span class=nx>p1</span> <span class=nx>person</span>
	<span class=c1>// 通过 . 的形式进行 赋值
</span><span class=c1></span>	<span class=nx>p1</span><span class=p>.</span><span class=nx>name</span> <span class=p>=</span> <span class=s>&#34;盘古&#34;</span>
	<span class=nx>p1</span><span class=p>.</span><span class=nx>city</span> <span class=p>=</span> <span class=s>&#34;宇宙&#34;</span>
	<span class=nx>p1</span><span class=p>.</span><span class=nx>age</span> <span class=p>=</span> <span class=mi>99</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>p1</span><span class=p>)</span>
	<span class=c1>// 通过 . 的形式进行 访问
</span><span class=c1></span>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;名字: %v 城市: %v 年龄: %v \n&#34;</span><span class=p>,</span> <span class=nx>p1</span><span class=p>.</span><span class=nx>city</span><span class=p>,</span> <span class=nx>p1</span><span class=p>.</span><span class=nx>city</span><span class=p>,</span> <span class=nx>p1</span><span class=p>.</span><span class=nx>age</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>main</span><span class=p>.</span><span class=nx>person</span><span class=p>{</span><span class=nx>name</span><span class=p>:</span><span class=s>&#34;盘古&#34;</span><span class=p>,</span> <span class=nx>city</span><span class=p>:</span><span class=s>&#34;宇宙&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span><span class=mi>99</span><span class=p>}</span>

<span class=nx>名字</span><span class=p>:</span> <span class=nx>宇宙</span> <span class=nx>城市</span><span class=p>:</span> <span class=nx>宇宙</span> <span class=nx>年龄</span><span class=p>:</span> <span class=mi>99</span>
</code></pre></td></tr></table></div></div><h3 id=匿名结构体>匿名结构体</h3><ul><li>在定义一些临时数据结构等场景下可以使用匿名结构体。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 定义一个匿名结构体
</span><span class=c1></span>	<span class=kd>var</span> <span class=nx>p2</span> <span class=kd>struct</span> <span class=p>{</span>
		<span class=nx>name</span> <span class=kt>string</span>
		<span class=nx>age</span>  <span class=kt>int8</span>
	<span class=p>}</span>
	<span class=nx>p2</span><span class=p>.</span><span class=nx>name</span> <span class=p>=</span> <span class=s>&#34;女娲&#34;</span>
	<span class=nx>p2</span><span class=p>.</span><span class=nx>age</span> <span class=p>=</span> <span class=mi>99</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>p2</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>struct</span> <span class=p>{</span> <span class=nx>name</span> <span class=kt>string</span><span class=p>;</span> <span class=nx>age</span> <span class=kt>int8</span> <span class=p>}{</span><span class=nx>name</span><span class=p>:</span><span class=s>&#34;女娲&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span><span class=mi>99</span><span class=p>}</span>
</code></pre></td></tr></table></div></div><h3 id=指针类型的结构体>指针类型的结构体</h3><ul><li>通过使用<code>new</code>关键字对结构体进行实例化, 得到的是结构体的内存地址。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>//结构体指针
</span><span class=c1></span>
<span class=kd>type</span> <span class=nx>person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span><span class=p>,</span> <span class=nx>city</span> <span class=kt>string</span>
	<span class=nx>age</span>        <span class=kt>int8</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 定义一个结构体指针
</span><span class=c1></span>	<span class=kd>var</span> <span class=nx>p3</span> <span class=p>=</span> <span class=nb>new</span><span class=p>(</span><span class=nx>person</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T \n&#34;</span><span class=p>,</span> <span class=nx>p3</span><span class=p>)</span>
	<span class=c1>// 结构体可以直接对结构体的指针使用,不需要使用*符号
</span><span class=c1></span>	<span class=nx>p3</span><span class=p>.</span><span class=nx>name</span> <span class=p>=</span> <span class=s>&#34;小企鹅&#34;</span>
	<span class=nx>p3</span><span class=p>.</span><span class=nx>city</span> <span class=p>=</span> <span class=s>&#34;北极&#34;</span>
	<span class=nx>p3</span><span class=p>.</span><span class=nx>age</span> <span class=p>=</span> <span class=mi>5</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>p3</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=o>*</span><span class=nx>main</span><span class=p>.</span><span class=nx>person</span>
<span class=o>&amp;</span><span class=nx>main</span><span class=p>.</span><span class=nx>person</span><span class=p>{</span><span class=nx>name</span><span class=p>:</span><span class=s>&#34;小企鹅&#34;</span><span class=p>,</span> <span class=nx>city</span><span class=p>:</span><span class=s>&#34;北极&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span><span class=mi>5</span><span class=p>}</span>
</code></pre></td></tr></table></div></div><h3 id=取结构体的地址实例化>取结构体的地址实例化</h3><ul><li>使用<code>&</code>对结构体进行取地址操作相当于对该结构体类型进行了一次<code>new</code>实例化操作。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span><span class=p>,</span> <span class=nx>city</span> <span class=kt>string</span>
	<span class=nx>age</span>        <span class=kt>int8</span>
<span class=p>}</span>
<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 取结构体地址进行实例化
</span><span class=c1></span>	<span class=nx>p4</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>person</span><span class=p>{}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;p4 = %T \n&#34;</span><span class=p>,</span> <span class=nx>p4</span><span class=p>)</span>
	<span class=nx>p4</span><span class=p>.</span><span class=nx>name</span> <span class=p>=</span> <span class=s>&#34;北极熊&#34;</span>
	<span class=nx>p4</span><span class=p>.</span><span class=nx>city</span> <span class=p>=</span> <span class=s>&#34;北极&#34;</span>
	<span class=nx>p4</span><span class=p>.</span><span class=nx>age</span> <span class=p>=</span> <span class=mi>10</span>
    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>p4</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>p4</span> <span class=p>=</span> <span class=o>*</span><span class=nx>main</span><span class=p>.</span><span class=nx>person</span>
<span class=o>&amp;</span><span class=nx>main</span><span class=p>.</span><span class=nx>person</span><span class=p>{</span><span class=nx>name</span><span class=p>:</span><span class=s>&#34;北极熊&#34;</span><span class=p>,</span> <span class=nx>city</span><span class=p>:</span><span class=s>&#34;北极&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span><span class=mi>10</span><span class=p>}</span>
</code></pre></td></tr></table></div></div><h3 id=结构体初始化>结构体初始化</h3><ul><li><p>没有初始化的结构体, 其成员变量都是对应其类型的零值。</p><ol><li>使用键值对初始化 - 使用键值对对结构体进行初始化时, 键对应结构体的字段, 值对应该字段的初始值。也可以对结构体指针进行键值对初始化。当某些字段没有初始值的时候, 该字段可以不写。此时, 没有指定初始值的字段的值就是该字段类型的零值。</li><li>使用值的列表初始化 - 初始化结构体的时候可以简写, 也就是初始化的时候不写键, 直接写值。但是需要注意的是 (1. 必须初始化结构体的所有字段。2. 初始值的填充顺序必须与字段在结构体中的声明顺序一致。3. 方式不能和键值初始化方式混用。)</li></ol></li><li><p>键值对初始化</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span><span class=p>,</span> <span class=nx>city</span> <span class=kt>string</span>
	<span class=nx>age</span>        <span class=kt>int</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 1. 键值对初始化
</span><span class=c1></span>	<span class=nx>p5</span> <span class=o>:=</span> <span class=nx>person</span><span class=p>{</span>
		<span class=nx>name</span><span class=p>:</span> <span class=s>&#34;玉帝&#34;</span><span class=p>,</span>
		<span class=nx>city</span><span class=p>:</span> <span class=s>&#34;天宫&#34;</span><span class=p>,</span>
		<span class=nx>age</span><span class=p>:</span>  <span class=mi>9999</span><span class=p>,</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>p5</span><span class=p>)</span>
	<span class=c1>// 取地址初始化
</span><span class=c1></span>	<span class=nx>p6</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>person</span><span class=p>{</span>
		<span class=nx>name</span><span class=p>:</span> <span class=s>&#34;王母&#34;</span><span class=p>,</span>
		<span class=nx>city</span><span class=p>:</span> <span class=s>&#34;天宫&#34;</span><span class=p>,</span>
		<span class=nx>age</span><span class=p>:</span>  <span class=mi>9998</span><span class=p>,</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>p6</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>main</span><span class=p>.</span><span class=nx>person</span><span class=p>{</span><span class=nx>name</span><span class=p>:</span><span class=s>&#34;玉帝&#34;</span><span class=p>,</span> <span class=nx>city</span><span class=p>:</span><span class=s>&#34;天宫&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span><span class=mi>9999</span><span class=p>}</span>
<span class=o>&amp;</span><span class=nx>main</span><span class=p>.</span><span class=nx>person</span><span class=p>{</span><span class=nx>name</span><span class=p>:</span><span class=s>&#34;王母&#34;</span><span class=p>,</span> <span class=nx>city</span><span class=p>:</span><span class=s>&#34;天宫&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span><span class=mi>9998</span><span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>值的列表初始化</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span><span class=p>,</span> <span class=nx>city</span> <span class=kt>string</span>
	<span class=nx>age</span>        <span class=kt>int</span>
<span class=p>}</span>
<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
    <span class=c1>// 2. 值的列表初始化
</span><span class=c1></span>    <span class=c1>// 值列表初始化 必须按照 struct 定义的顺序写, 必须写全部字段
</span><span class=c1></span>	<span class=nx>p7</span> <span class=o>:=</span> <span class=nx>person</span><span class=p>{</span>
		<span class=s>&#34;二郎神&#34;</span><span class=p>,</span>
		<span class=s>&#34;天宫&#34;</span><span class=p>,</span>
		<span class=mi>999</span><span class=p>,</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>p7</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>main</span><span class=p>.</span><span class=nx>person</span><span class=p>{</span><span class=nx>name</span><span class=p>:</span><span class=s>&#34;二郎神&#34;</span><span class=p>,</span> <span class=nx>city</span><span class=p>:</span><span class=s>&#34;天宫&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span><span class=mi>999</span><span class=p>}</span>
</code></pre></td></tr></table></div></div><h3 id=结构体内存布局>结构体内存布局</h3><ul><li>结构体占用一块连续的内存。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>test</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>a</span> <span class=kt>int8</span>
	<span class=nx>b</span> <span class=kt>int8</span>
	<span class=nx>c</span> <span class=kt>int8</span>
	<span class=nx>d</span> <span class=kt>int8</span>
<span class=p>}</span>
<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>n</span> <span class=o>:=</span> <span class=nx>test</span><span class=p>{</span>
		<span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;n.a %p\n&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>n</span><span class=p>.</span><span class=nx>a</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;n.b %p\n&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>n</span><span class=p>.</span><span class=nx>b</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;n.c %p\n&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>n</span><span class=p>.</span><span class=nx>c</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;n.d %p\n&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>n</span><span class=p>.</span><span class=nx>d</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>n</span><span class=p>.</span><span class=nx>a</span> <span class=mh>0xc0000a0004</span>
<span class=nx>n</span><span class=p>.</span><span class=nx>b</span> <span class=mh>0xc0000a0005</span>
<span class=nx>n</span><span class=p>.</span><span class=nx>c</span> <span class=mh>0xc0000a0006</span>
<span class=nx>n</span><span class=p>.</span><span class=nx>d</span> <span class=mh>0xc0000a0007</span>
</code></pre></td></tr></table></div></div><h3 id=结构体的匿名字段>结构体的匿名字段</h3><ul><li>结构体允许其成员字段在声明时没有字段名而只有类型, 这种没有名字的字段就称为匿名字段。</li><li>匿名字段不能有重复的类型.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// 结构体的匿名字段
</span><span class=c1></span><span class=kd>type</span> <span class=nx>Person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=kt>string</span>
	<span class=kt>int</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 调用以及访问结构体的匿名字段
</span><span class=c1></span>	<span class=nx>p1</span> <span class=o>:=</span> <span class=nx>Person</span><span class=p>{</span>
		<span class=s>&#34;张大仙&#34;</span><span class=p>,</span>
		<span class=mi>18</span><span class=p>,</span>
	<span class=p>}</span>
	<span class=c1>// 通过访问 类型名字 来访问字段
</span><span class=c1></span>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>p1</span><span class=p>.</span><span class=kt>string</span><span class=p>,</span> <span class=nx>p1</span><span class=p>.</span><span class=kt>int</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>张大仙</span> <span class=mi>18</span>
</code></pre></td></tr></table></div></div><h3 id=嵌套结构体>嵌套结构体</h3><ul><li>一个结构体中可以嵌套包含另一个结构体或结构体指针。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// 嵌套结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>Address</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>province</span><span class=p>,</span> <span class=nx>city</span> <span class=kt>string</span>
<span class=p>}</span>

<span class=kd>type</span> <span class=nx>Person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span><span class=p>,</span> <span class=nx>gender</span> <span class=kt>string</span>
	<span class=nx>age</span>          <span class=kt>int</span>
	<span class=c1>// 嵌套 Address 结构体
</span><span class=c1></span>	<span class=c1>// 第一个Address是名称 第二个Address是类型
</span><span class=c1></span>	<span class=nx>Address</span> <span class=nx>Address</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>//嵌套结构体的初始化
</span><span class=c1></span>	<span class=nx>p1</span> <span class=o>:=</span> <span class=nx>Person</span><span class=p>{</span>
		<span class=nx>name</span><span class=p>:</span>   <span class=s>&#34;张大仙&#34;</span><span class=p>,</span>
		<span class=nx>gender</span><span class=p>:</span> <span class=s>&#34;女&#34;</span><span class=p>,</span>
		<span class=nx>age</span><span class=p>:</span>    <span class=mi>30</span><span class=p>,</span>
		<span class=nx>Address</span><span class=p>:</span> <span class=nx>Address</span><span class=p>{</span>
			<span class=nx>province</span><span class=p>:</span> <span class=s>&#34;广东&#34;</span><span class=p>,</span>
			<span class=nx>city</span><span class=p>:</span>     <span class=s>&#34;深圳&#34;</span><span class=p>,</span>
		<span class=p>},</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>p1</span><span class=p>)</span>
	<span class=c1>//嵌套结构体的字段访问
</span><span class=c1></span>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>p1</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span> <span class=nx>p1</span><span class=p>.</span><span class=nx>Address</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>main</span><span class=p>.</span><span class=nx>Person</span><span class=p>{</span><span class=nx>name</span><span class=p>:</span><span class=s>&#34;张大仙&#34;</span><span class=p>,</span> <span class=nx>gender</span><span class=p>:</span><span class=s>&#34;女&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span><span class=mi>30</span><span class=p>,</span> <span class=nx>Address</span><span class=p>:</span><span class=nx>main</span><span class=p>.</span><span class=nx>Address</span><span class=p>{</span><span class=nx>province</span><span class=p>:</span><span class=s>&#34;广东&#34;</span><span class=p>,</span> <span class=nx>city</span><span class=p>:</span><span class=s>&#34;深圳&#34;</span><span class=p>}}</span>
<span class=nx>张大仙</span> <span class=p>{</span><span class=nx>广东</span> <span class=nx>深圳</span><span class=p>}</span>
</code></pre></td></tr></table></div></div><h3 id=嵌套匿名结构体>嵌套匿名结构体</h3><ul><li>如上例子修改一下嵌套的结构体只写类型名</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// 嵌套结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>Address</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>province</span><span class=p>,</span> <span class=nx>city</span> <span class=kt>string</span>
<span class=p>}</span>

<span class=kd>type</span> <span class=nx>Person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span><span class=p>,</span> <span class=nx>gender</span> <span class=kt>string</span>
	<span class=nx>age</span>          <span class=kt>int</span>
	<span class=c1>// 嵌套 匿名结构体
</span><span class=c1></span>	<span class=c1>// 只写类型名
</span><span class=c1></span>	<span class=nx>Address</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>//嵌套结构体的初始化
</span><span class=c1></span>	<span class=nx>p1</span> <span class=o>:=</span> <span class=nx>Person</span><span class=p>{</span>
		<span class=nx>name</span><span class=p>:</span>   <span class=s>&#34;张大仙&#34;</span><span class=p>,</span>
		<span class=nx>gender</span><span class=p>:</span> <span class=s>&#34;女&#34;</span><span class=p>,</span>
		<span class=nx>age</span><span class=p>:</span>    <span class=mi>30</span><span class=p>,</span>
		<span class=nx>Address</span><span class=p>:</span> <span class=nx>Address</span><span class=p>{</span>
			<span class=nx>province</span><span class=p>:</span> <span class=s>&#34;广东&#34;</span><span class=p>,</span>
			<span class=nx>city</span><span class=p>:</span>     <span class=s>&#34;深圳&#34;</span><span class=p>,</span>
		<span class=p>},</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>p1</span><span class=p>)</span>
	<span class=c1>//嵌套匿名结构体的访问, 可直接访问匿名结构体里的字段
</span><span class=c1></span>	<span class=c1>// 如下两种方式都可以访问结构体里的字段
</span><span class=c1></span>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>p1</span><span class=p>.</span><span class=nx>Address</span><span class=p>.</span><span class=nx>city</span><span class=p>,</span> <span class=nx>p1</span><span class=p>.</span><span class=nx>city</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>main</span><span class=p>.</span><span class=nx>Person</span><span class=p>{</span><span class=nx>name</span><span class=p>:</span><span class=s>&#34;张大仙&#34;</span><span class=p>,</span> <span class=nx>gender</span><span class=p>:</span><span class=s>&#34;女&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span><span class=mi>30</span><span class=p>,</span> <span class=nx>Address</span><span class=p>:</span><span class=nx>main</span><span class=p>.</span><span class=nx>Address</span><span class=p>{</span><span class=nx>province</span><span class=p>:</span><span class=s>&#34;广东&#34;</span><span class=p>,</span> <span class=nx>city</span><span class=p>:</span><span class=s>&#34;深圳&#34;</span><span class=p>}}</span>
<span class=nx>深圳</span> <span class=nx>深圳</span>
</code></pre></td></tr></table></div></div><ul><li>匿名结构体字段冲突</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kn>package</span> <span class=nx>main</span>

<span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>

<span class=c1>// 嵌套匿名结构体字段冲突
</span><span class=c1></span><span class=kd>type</span> <span class=nx>Address</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>province</span><span class=p>,</span> <span class=nx>city</span> <span class=kt>string</span>
	<span class=nx>updateTime</span>     <span class=kt>string</span>
<span class=p>}</span>
<span class=kd>type</span> <span class=nx>Email</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>addr</span>       <span class=kt>string</span>
	<span class=nx>updateTime</span> <span class=kt>string</span>
<span class=p>}</span>

<span class=kd>type</span> <span class=nx>Person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span><span class=p>,</span> <span class=nx>gender</span> <span class=kt>string</span>
	<span class=nx>age</span>          <span class=kt>int</span>
	<span class=c1>// 嵌套 匿名结构体 Address
</span><span class=c1></span>	<span class=nx>Address</span>
	<span class=c1>// 嵌套 匿名结构体 Email
</span><span class=c1></span>	<span class=nx>Email</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 初始化一个Person 实例
</span><span class=c1></span>	<span class=nx>p1</span> <span class=o>:=</span> <span class=nx>Person</span><span class=p>{</span>
		<span class=nx>name</span><span class=p>:</span>   <span class=s>&#34;张大仙&#34;</span><span class=p>,</span>
		<span class=nx>gender</span><span class=p>:</span> <span class=s>&#34;女&#34;</span><span class=p>,</span>
		<span class=nx>age</span><span class=p>:</span>    <span class=mi>20</span><span class=p>,</span>
		<span class=nx>Address</span><span class=p>:</span> <span class=nx>Address</span><span class=p>{</span>
			<span class=nx>province</span><span class=p>:</span>   <span class=s>&#34;广东&#34;</span><span class=p>,</span>
			<span class=nx>city</span><span class=p>:</span>       <span class=s>&#34;深圳&#34;</span><span class=p>,</span>
			<span class=nx>updateTime</span><span class=p>:</span> <span class=s>&#34;2019-10-30&#34;</span><span class=p>,</span>
		<span class=p>},</span>
		<span class=nx>Email</span><span class=p>:</span> <span class=nx>Email</span><span class=p>{</span>
			<span class=nx>addr</span><span class=p>:</span>       <span class=s>&#34;zhangdaxian@huya.com&#34;</span><span class=p>,</span>
			<span class=nx>updateTime</span><span class=p>:</span> <span class=s>&#34;2019-10-29&#34;</span><span class=p>,</span>
		<span class=p>},</span>
	<span class=p>}</span>

	<span class=c1>// 当匿名结构体存在冲突字段的时候,需要区分
</span><span class=c1></span>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Address:&#34;</span><span class=p>,</span> <span class=nx>p1</span><span class=p>.</span><span class=nx>Address</span><span class=p>.</span><span class=nx>updateTime</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Email:&#34;</span><span class=p>,</span> <span class=nx>p1</span><span class=p>.</span><span class=nx>Email</span><span class=p>.</span><span class=nx>updateTime</span><span class=p>)</span>
<span class=p>}</span>

</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>Address</span><span class=p>:</span> <span class=mi>2019</span><span class=o>-</span><span class=mi>10</span><span class=o>-</span><span class=mi>30</span>
<span class=nx>Email</span><span class=p>:</span> <span class=mi>2019</span><span class=o>-</span><span class=mi>10</span><span class=o>-</span><span class=mi>29</span>
</code></pre></td></tr></table></div></div><h3 id=构造函数>构造函数</h3><ul><li>Go语言的结构体是没有构造函数, 我们可以自己实现。构造函数就是 构造一个结构体实例的函数。</li><li>如下实现了一个person的构造函数。 因为struct是值类型, 如果结构体比较复杂的话, 值拷贝性能开销会比较大, 所以该构造函数返回的是结构体指针类型。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span><span class=p>,</span> <span class=nx>city</span> <span class=kt>string</span>
	<span class=nx>age</span>        <span class=kt>int</span>
<span class=p>}</span>

<span class=c1>// 构造函数
</span><span class=c1></span>
<span class=c1>// 构造函数一般约定名称前为 new 开头
</span><span class=c1>// 这里返回值使用的是 取 person 内存地址指针的值
</span><span class=c1></span><span class=kd>func</span> <span class=nf>newPerson</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>city</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>age</span> <span class=kt>int</span><span class=p>)</span> <span class=o>*</span><span class=nx>person</span> <span class=p>{</span>
    <span class=c1>// 返回 内存地址的 person
</span><span class=c1></span>	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>person</span><span class=p>{</span>
		<span class=nx>name</span><span class=p>:</span> <span class=nx>name</span><span class=p>,</span>
		<span class=nx>city</span><span class=p>:</span> <span class=nx>city</span><span class=p>,</span>
		<span class=nx>age</span><span class=p>:</span>  <span class=nx>age</span><span class=p>,</span>
	<span class=p>}</span>
<span class=p>}</span>
<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 构造多个 person
</span><span class=c1></span>	<span class=nx>p8</span> <span class=o>:=</span> <span class=nf>newPerson</span><span class=p>(</span><span class=s>&#34;托塔天王&#34;</span><span class=p>,</span> <span class=s>&#34;天宫&#34;</span><span class=p>,</span> <span class=mi>999</span><span class=p>)</span>
    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>p8</span><span class=p>)</span>
    <span class=nx>p9</span> <span class=o>:=</span> <span class=nf>newPerson</span><span class=p>(</span><span class=s>&#34;太白金星&#34;</span><span class=p>,</span> <span class=s>&#34;天宫&#34;</span><span class=p>,</span> <span class=mi>9999</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>p9</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=o>&amp;</span><span class=nx>main</span><span class=p>.</span><span class=nx>person</span><span class=p>{</span><span class=nx>name</span><span class=p>:</span><span class=s>&#34;托塔天王&#34;</span><span class=p>,</span> <span class=nx>city</span><span class=p>:</span><span class=s>&#34;天宫&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span><span class=mi>999</span><span class=p>}</span>
<span class=o>&amp;</span><span class=nx>main</span><span class=p>.</span><span class=nx>person</span><span class=p>{</span><span class=nx>name</span><span class=p>:</span><span class=s>&#34;太白金星&#34;</span><span class=p>,</span> <span class=nx>city</span><span class=p>:</span><span class=s>&#34;天宫&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span><span class=mi>9999</span><span class=p>}</span>
</code></pre></td></tr></table></div></div><h3 id=结构体练习题>结构体练习题</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>student</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span> <span class=kt>string</span>
	<span class=nx>age</span>  <span class=kt>int</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 定义一个 map key 值为 string  value 为 struct
</span><span class=c1></span>	<span class=nx>m</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=o>*</span><span class=nx>student</span><span class=p>)</span>
	<span class=c1>// 定义一个 类型为 struct 的切片,里面有三组元素
</span><span class=c1></span>	<span class=nx>stus</span> <span class=o>:=</span> <span class=p>[]</span><span class=nx>student</span><span class=p>{</span>
		<span class=p>{</span><span class=nx>name</span><span class=p>:</span> <span class=s>&#34;小王子&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span> <span class=mi>18</span><span class=p>},</span>
		<span class=p>{</span><span class=nx>name</span><span class=p>:</span> <span class=s>&#34;娜扎&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span> <span class=mi>23</span><span class=p>},</span>
		<span class=p>{</span><span class=nx>name</span><span class=p>:</span> <span class=s>&#34;大王八&#34;</span><span class=p>,</span> <span class=nx>age</span><span class=p>:</span> <span class=mi>9000</span><span class=p>},</span>
	<span class=p>}</span>

	<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>stu</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>stus</span> <span class=p>{</span>
		<span class=c1>// stu = {小王子 18}  {娜扎 23} {大王八 9000}
</span><span class=c1></span>		<span class=c1>// stu.name 分别 = 小王子, 娜扎, 大王八
</span><span class=c1></span>		<span class=c1>// &amp;stu 是取地址, slice 是引用类型, 指向同一个内存地址
</span><span class=c1></span>		<span class=nx>m</span><span class=p>[</span><span class=nx>stu</span><span class=p>.</span><span class=nx>name</span><span class=p>]</span> <span class=p>=</span> <span class=o>&amp;</span><span class=nx>stu</span>
		<span class=c1>// 所以这里 map[大王八:0xc000092020 娜扎:0xc000092020 小王子:0xc000092020]
</span><span class=c1></span>	<span class=p>}</span>

	<span class=k>for</span> <span class=nx>k</span><span class=p>,</span> <span class=nx>v</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>m</span> <span class=p>{</span>
		<span class=c1>// m = map[大王八:0xc000092020 娜扎:0xc000092020 小王子:0xc000092020]
</span><span class=c1></span>		<span class=c1>// k = &#34;大王八&#34;, &#34;娜扎&#34;, &#34;小王子&#34;
</span><span class=c1></span>		<span class=c1>// v = &#34;0xc000092020&#34; 同一个内存地址
</span><span class=c1></span>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>k</span><span class=p>,</span> <span class=s>&#34;=&gt;&#34;</span><span class=p>,</span> <span class=nx>v</span><span class=p>.</span><span class=nx>name</span><span class=p>)</span>
	<span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>小王子</span> <span class=p>=&gt;</span> <span class=nx>大王八</span>
<span class=nx>娜扎</span> <span class=p>=&gt;</span> <span class=nx>大王八</span>
<span class=nx>大王八</span> <span class=p>=&gt;</span> <span class=nx>大王八</span>
</code></pre></td></tr></table></div></div><h2 id=方法和接收者>方法和接收者</h2><ul><li><p>Go语言中的方法<code>（Method）</code>是一种作用于特定类型变量的函数。这种特定类型变量叫做接收者<code>（Receiver)</code> , 接收者的概念就类似于其他语言中的<code>this</code>或者<code>self</code>。</p></li><li><p>方法与函数的区别是, 函数不属于任何类型, 方法属于特定的类型。</p></li><li><p>方法的定义格式:</p><ul><li>接收者变量: 接收者中的参数变量名在命名时, 官方建议使用接收者类型名的第一个小写字母, 而不是self、this之类的命名。例如, <code>Person</code>类型的接收者变量应该命名为 <code>p</code>, <code>Connector</code>类型的接收者变量应该命名为<code>c</code>等。</li><li>接收者类型: 接收者类型和参数类似, 可以是指针类型和非指针类型。</li><li>方法名、参数列表、返回参数: 具体格式与函数定义相同。</li></ul></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=p>(</span><span class=nx>接收者变量</span> <span class=nx>接收者类型</span><span class=p>)</span> <span class=nx>方法名</span><span class=p>(</span><span class=nx>参数列表</span><span class=p>)</span> <span class=p>(</span><span class=nx>返回参数</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>函数体</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// 方法与接受者
</span><span class=c1></span>
<span class=c1>// Person 定义一个结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>Person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span> <span class=kt>string</span>
	<span class=nx>age</span>  <span class=kt>int8</span>
<span class=p>}</span>

<span class=c1>// NewPerson  Person 结构体的构造函数
</span><span class=c1></span><span class=kd>func</span> <span class=nf>NewPerson</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>age</span> <span class=kt>int8</span><span class=p>)</span> <span class=o>*</span><span class=nx>Person</span> <span class=p>{</span>
	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>Person</span><span class=p>{</span>
		<span class=nx>name</span><span class=p>:</span> <span class=nx>name</span><span class=p>,</span>
		<span class=nx>age</span><span class=p>:</span>  <span class=nx>age</span><span class=p>,</span>
	<span class=p>}</span>
<span class=p>}</span>

<span class=c1>// Dream 为Person类型定义的方法
</span><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>p</span> <span class=nx>Person</span><span class=p>)</span> <span class=nf>Dream</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%v 的梦想是做一条咸鱼 \n&#34;</span><span class=p>,</span> <span class=nx>p</span><span class=p>.</span><span class=nx>name</span><span class=p>)</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 实例化 Person
</span><span class=c1></span>	<span class=nx>p1</span> <span class=o>:=</span> <span class=nf>NewPerson</span><span class=p>(</span><span class=s>&#34;八戒&#34;</span><span class=p>,</span> <span class=mi>20</span><span class=p>)</span>
	<span class=c1>// 调用方法
</span><span class=c1></span>	<span class=nx>p1</span><span class=p>.</span><span class=nf>Dream</span><span class=p>()</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>八戒</span> <span class=nx>的梦想是做一条咸鱼</span>
</code></pre></td></tr></table></div></div><h3 id=指针类型的接收者>指针类型的接收者</h3><ul><li><p>指针类型的接收者由一个结构体的指针组成, 由于指针的特性, 调用方法时修改接收者指针的任意成员变量, 在方法结束后, 修改都是有效的。这种方式就十分接近于其他语言中面向对象中的<code>this</code>或者<code>self</code>。</p></li><li><p>例如 我们为Person添加一个SetAge方法, 来修改实例变量的年龄。</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// Person 定义一个结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>Person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span> <span class=kt>string</span>
	<span class=nx>age</span>  <span class=kt>int8</span>
<span class=p>}</span>

<span class=c1>// NewPerson  Person 结构体的构造函数
</span><span class=c1></span><span class=kd>func</span> <span class=nf>NewPerson</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>age</span> <span class=kt>int8</span><span class=p>)</span> <span class=o>*</span><span class=nx>Person</span> <span class=p>{</span>
	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>Person</span><span class=p>{</span>
		<span class=nx>name</span><span class=p>:</span> <span class=nx>name</span><span class=p>,</span>
		<span class=nx>age</span><span class=p>:</span>  <span class=nx>age</span><span class=p>,</span>
	<span class=p>}</span>
<span class=p>}</span>

<span class=c1>// 指针接受者 接受者的类型是指针类型
</span><span class=c1>// SetAge 修改age 的方法
</span><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>p</span> <span class=o>*</span><span class=nx>Person</span><span class=p>)</span> <span class=nf>SetAge</span><span class=p>(</span><span class=nx>newAge</span> <span class=kt>int8</span><span class=p>)</span> <span class=p>{</span>
	<span class=nx>p</span><span class=p>.</span><span class=nx>age</span> <span class=p>=</span> <span class=nx>newAge</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 实例化 Person
</span><span class=c1></span>	<span class=nx>p1</span> <span class=o>:=</span> <span class=nf>NewPerson</span><span class=p>(</span><span class=s>&#34;八戒&#34;</span><span class=p>,</span> <span class=mi>20</span><span class=p>)</span>
	<span class=c1>// 修改前的值
</span><span class=c1></span>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>p1</span><span class=p>.</span><span class=nx>age</span><span class=p>)</span>
	<span class=c1>// 调用指针类型的方法
</span><span class=c1></span>	<span class=nx>p1</span><span class=p>.</span><span class=nf>SetAge</span><span class=p>(</span><span class=mi>99</span><span class=p>)</span>
	<span class=c1>// 修改后的值
</span><span class=c1></span>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>p1</span><span class=p>.</span><span class=nx>age</span><span class=p>)</span>
<span class=p>}</span>

</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=mi>20</span>
<span class=mi>99</span>
</code></pre></td></tr></table></div></div><h3 id=值接收者>值接收者</h3><ul><li><p>当方法作用于值类型接收者时, Go语言会在代码运行时将接收者的值复制一份。在值类型接收者的方法中可以获取接收者的成员值, 但修改操作只是针对副本, 无法修改接收者变量本身。</p></li><li><p>函数与方法传参的时候都是复制了一份, 所以修改只是修改了复制的那一份, 没有修改到本身。</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// Person 定义一个结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>Person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>name</span> <span class=kt>string</span>
	<span class=nx>age</span>  <span class=kt>int8</span>
<span class=p>}</span>

<span class=c1>// NewPerson  Person 结构体的构造函数
</span><span class=c1></span><span class=kd>func</span> <span class=nf>NewPerson</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>age</span> <span class=kt>int8</span><span class=p>)</span> <span class=o>*</span><span class=nx>Person</span> <span class=p>{</span>
	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>Person</span><span class=p>{</span>
		<span class=nx>name</span><span class=p>:</span> <span class=nx>name</span><span class=p>,</span>
		<span class=nx>age</span><span class=p>:</span>  <span class=nx>age</span><span class=p>,</span>
	<span class=p>}</span>
<span class=p>}</span>


<span class=c1>// 值接收者 接收者的类型是值类型
</span><span class=c1>// SetName 修改 name 的方法
</span><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>p</span> <span class=nx>Person</span><span class=p>)</span> <span class=nf>SetName</span><span class=p>(</span><span class=nx>newName</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
	<span class=nx>p</span><span class=p>.</span><span class=nx>name</span> <span class=p>=</span> <span class=nx>newName</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 实例化 Person
</span><span class=c1></span>	<span class=nx>p1</span> <span class=o>:=</span> <span class=nf>NewPerson</span><span class=p>(</span><span class=s>&#34;八戒&#34;</span><span class=p>,</span> <span class=mi>20</span><span class=p>)</span>

	<span class=c1>// 修改前的值
</span><span class=c1></span>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>p1</span><span class=p>.</span><span class=nx>name</span><span class=p>)</span>
	<span class=c1>// 调用值类型的修改方法
</span><span class=c1></span>	<span class=nx>p1</span><span class=p>.</span><span class=nf>SetName</span><span class=p>(</span><span class=s>&#34;悟空&#34;</span><span class=p>)</span>
	<span class=c1>// 修改后的值
</span><span class=c1></span>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>p1</span><span class=p>.</span><span class=nx>name</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>八戒</span>
<span class=nx>八戒</span>
</code></pre></td></tr></table></div></div><ul><li>什么时候应该使用指针类型接收者<ol><li>需要修改接收者中的值</li><li>接收者是拷贝代价比较大的大对象</li><li>保证一致性, 如果有某个方法使用了指针接收者, 那么其他的方法也应该使用指针接收者。</li></ol></li></ul><h3 id=任意类型添加方法>任意类型添加方法</h3><ul><li>在Go语言中, 接收者的类型可以是任何类型, 不仅仅是结构体, 任何类型都可以拥有方法。</li><li>举个例子: 我们基于内置的<code>int</code>类型使用<code>type</code>关键字可以定义新的自定义类型, 然后可以为我们的自定义类型添加方法。</li><li>注意事项: 非本地类型不能定义方法, 也就是说我们不能给别的包的类型定义方法。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// 任意类型添加方法
</span><span class=c1></span>
<span class=c1>// 给任意类型定义方法必须是包内的类型
</span><span class=c1></span><span class=kd>type</span> <span class=nx>myString</span> <span class=kt>string</span>

<span class=c1>// 为 myString 类型定义一个方法 sayHello
</span><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>m</span> <span class=nx>myString</span><span class=p>)</span> <span class=nf>sayHello</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Hello I&#39;am myString!&#34;</span><span class=p>)</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>//定义一个m 类型是 myString
</span><span class=c1></span>	<span class=nx>m</span> <span class=o>:=</span> <span class=nf>myString</span><span class=p>(</span><span class=s>&#34;string&#34;</span><span class=p>)</span>
	<span class=c1>// 调用方法
</span><span class=c1></span>	<span class=nx>m</span><span class=p>.</span><span class=nf>sayHello</span><span class=p>()</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>Hello</span> <span class=nx>I</span><span class=err>&#39;</span><span class=nx>am</span> <span class=nx>myString</span><span class=p>!</span>
</code></pre></td></tr></table></div></div><h3 id=结构体继承>结构体"继承&rdquo;</h3><ul><li>Go语言中是没有继承这个概念的, 但是使用结构体也可以实现其他编程语言中面向对象的继承。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// 结构体的 &#34;继承&#34;
</span><span class=c1>// 利用 结构体嵌套的方法实现
</span><span class=c1></span><span class=kd>type</span> <span class=nx>Animal</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>Name</span> <span class=kt>string</span>
<span class=p>}</span>

<span class=c1>// 定义一个 Animal Move 的方法
</span><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>a</span> <span class=o>*</span><span class=nx>Animal</span><span class=p>)</span> <span class=nf>Move</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s 走来走去 \n&#34;</span><span class=p>,</span> <span class=nx>a</span><span class=p>.</span><span class=nx>Name</span><span class=p>)</span>
<span class=p>}</span>

<span class=c1>// 定义一个 Dog 的结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>Dog</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>Feet</span> <span class=kt>int</span>
	<span class=c1>// 嵌套 匿名结构体 Animal的指针
</span><span class=c1></span>	<span class=o>*</span><span class=nx>Animal</span>
<span class=p>}</span>

<span class=c1>// 定义一个 Dog wang 的方法
</span><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>d</span> <span class=nx>Dog</span><span class=p>)</span> <span class=nf>Wang</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s 汪汪汪的叫 \n&#34;</span><span class=p>,</span> <span class=nx>d</span><span class=p>.</span><span class=nx>Name</span><span class=p>)</span>
<span class=p>}</span>

<span class=c1>// 定义一个 Cat 的结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>Cat</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>Feet</span> <span class=kt>int</span>
	<span class=c1>// 嵌套 匿名结构体 Animal的指针
</span><span class=c1></span>	<span class=o>*</span><span class=nx>Animal</span>
<span class=p>}</span>

<span class=c1>// 定义一个 Cat mao 的方法
</span><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=nx>Cat</span><span class=p>)</span> <span class=nf>Mao</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s 喵喵喵的叫 \n&#34;</span><span class=p>,</span> <span class=nx>c</span><span class=p>.</span><span class=nx>Name</span><span class=p>)</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 实例化一个 dog
</span><span class=c1></span>	<span class=nx>dog1</span> <span class=o>:=</span> <span class=nx>Dog</span><span class=p>{</span>
		<span class=nx>Feet</span><span class=p>:</span> <span class=mi>4</span><span class=p>,</span>
		<span class=nx>Animal</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>Animal</span><span class=p>{</span>
			<span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;旺财&#34;</span><span class=p>,</span>
		<span class=p>},</span>
	<span class=p>}</span>
	<span class=c1>// 实例化一个 cat
</span><span class=c1></span>	<span class=nx>cat1</span> <span class=o>:=</span> <span class=nx>Cat</span><span class=p>{</span>
		<span class=nx>Feet</span><span class=p>:</span> <span class=mi>4</span><span class=p>,</span>
		<span class=nx>Animal</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>Animal</span><span class=p>{</span>
			<span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;小花&#34;</span><span class=p>,</span>
		<span class=p>},</span>
	<span class=p>}</span>
	<span class=c1>// 调用方法
</span><span class=c1></span>	<span class=nx>dog1</span><span class=p>.</span><span class=nf>Wang</span><span class=p>()</span>
	<span class=nx>cat1</span><span class=p>.</span><span class=nf>Mao</span><span class=p>()</span>
	<span class=c1>// Dog 与 Cat 也可以调用 嵌套结构的方法 Move
</span><span class=c1></span>	<span class=c1>// 这就相当于实现了 继承
</span><span class=c1></span>	<span class=nx>dog1</span><span class=p>.</span><span class=nf>Move</span><span class=p>()</span>
	<span class=nx>cat1</span><span class=p>.</span><span class=nf>Move</span><span class=p>()</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>旺财</span> <span class=nx>汪汪汪的叫</span>
<span class=nx>小花</span> <span class=nx>喵喵喵的叫</span>
<span class=nx>旺财</span> <span class=nx>走来走去</span>
<span class=nx>小花</span> <span class=nx>走来走去</span>
</code></pre></td></tr></table></div></div><h3 id=结构体字段的可见性>结构体字段的可见性</h3><ul><li>结构体中字段大写开头表示可公开访问, 小写表示私有（仅在定义当前结构体的包中可访问）。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>Person</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=c1>// 字段首字母大写开头的表示外部可访问
</span><span class=c1></span>	<span class=nx>Name</span> <span class=kt>string</span>
	<span class=nx>Age</span> <span class=kt>int</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><h3 id=结构体json序列化>结构体JSON序列化</h3><ul><li>JSON <code>(JavaScript Object Notation)</code> 是一种轻量级的数据交换格式。易于人阅读和编写。同时也易于机器解析和生成。</li><li>JSON键值对是用来保存<code>JS</code>对象的一种方式, <code>键/值</code> 对组合中的键名写在前面并用双引号<code>""</code>包裹，使用冒号<code>:</code>分隔, 然后紧接着值, 多个键值之间使用英文<code>,</code>分隔。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kn>package</span> <span class=nx>main</span>

<span class=kn>import</span> <span class=p>(</span>
	<span class=s>&#34;encoding/json&#34;</span>
	<span class=s>&#34;fmt&#34;</span>
<span class=p>)</span>

<span class=c1>// 定义一个 Student 的结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>student</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>ID</span>   <span class=kt>int</span>
	<span class=nx>Name</span> <span class=kt>string</span>
<span class=p>}</span>

<span class=c1>// 定义一个 student 的构造函数
</span><span class=c1></span><span class=kd>func</span> <span class=nf>newStudent</span><span class=p>(</span><span class=nx>id</span> <span class=kt>int</span><span class=p>,</span> <span class=nx>name</span> <span class=kt>string</span><span class=p>)</span> <span class=nx>student</span> <span class=p>{</span>
	<span class=k>return</span> <span class=nx>student</span><span class=p>{</span>
		<span class=nx>ID</span><span class=p>:</span>   <span class=nx>id</span><span class=p>,</span>
		<span class=nx>Name</span><span class=p>:</span> <span class=nx>name</span><span class=p>,</span>
	<span class=p>}</span>
<span class=p>}</span>

<span class=c1>// 定义一个 class 的结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>class</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>Title</span> <span class=kt>string</span>
	<span class=c1>// 定义个student字段,类型是 student结构体类型的切片
</span><span class=c1></span>	<span class=nx>Students</span> <span class=p>[]</span><span class=nx>student</span>
<span class=p>}</span>

<span class=c1>// 结构体 JSON 序列化
</span><span class=c1></span><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 实例化一个 class 的对象 c1
</span><span class=c1></span>	<span class=nx>c1</span> <span class=o>:=</span> <span class=nx>class</span><span class=p>{</span>
		<span class=nx>Title</span><span class=p>:</span> <span class=s>&#34;王者荣耀&#34;</span><span class=p>,</span>
		<span class=c1>// student 字段是一个切片,所以需要先初始化才能使用
</span><span class=c1></span>		<span class=nx>Students</span><span class=p>:</span> <span class=nb>make</span><span class=p>([]</span><span class=nx>student</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>20</span><span class=p>),</span>
	<span class=p>}</span>
	<span class=c1>// 批量录入学生信息
</span><span class=c1></span>	<span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>1</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
		<span class=nx>tmpStu</span> <span class=o>:=</span> <span class=nf>newStudent</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;召唤师%02d&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>))</span>
		<span class=c1>// 切片使用 append 函数追加 元素
</span><span class=c1></span>		<span class=nx>c1</span><span class=p>.</span><span class=nx>Students</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>c1</span><span class=p>.</span><span class=nx>Students</span><span class=p>,</span> <span class=nx>tmpStu</span><span class=p>)</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>c1</span><span class=p>)</span>
	<span class=c1>// 利用 json.Marshal 包序列化 这一组数据
</span><span class=c1></span>	<span class=c1>// 序列化因为调用的是外部的包，所以上面的 struct 跟 字段必须大写
</span><span class=c1></span>	<span class=nx>data</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Marshal</span><span class=p>(</span><span class=nx>c1</span><span class=p>)</span>
	<span class=c1>// 格式化 json 输出
</span><span class=c1></span>	<span class=c1>//data, err := json.MarshalIndent(c1, &#34;&#34;, &#34;&#34;)
</span><span class=c1></span>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;json marshal failed err:&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
		<span class=k>return</span>
	<span class=p>}</span>
	<span class=c1>// data 变量保存的数据类型为 byte 类型(uint8)
</span><span class=c1></span>	<span class=c1>// %s 会转换成 string 类型打印
</span><span class=c1></span>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s \n&#34;</span><span class=p>,</span> <span class=nx>data</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>main</span><span class=p>.</span><span class=nx>class</span><span class=p>{</span><span class=nx>Title</span><span class=p>:</span><span class=s>&#34;王者荣耀&#34;</span><span class=p>,</span> <span class=nx>Students</span><span class=p>:[]</span><span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>1</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;召唤师01&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>2</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;召唤师02&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>3</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;召唤师03&#34;</span><span class=p>},</span> <span class=nx>ma</span><span class=p>:</span><span class=mi>4</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;召唤师04&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>5</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;召唤师05&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>6</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;召唤师06&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>7</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;召唤师07&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>8</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;召唤师08t{ID:9, Name:&#34;</span><span class=nx>召唤师09</span><span class=s>&#34;}}}
</span><span class=s>
</span><span class=s>{&#34;</span><span class=nx>Title</span><span class=s>&#34;:&#34;</span><span class=nx>王者荣耀</span><span class=s>&#34;,&#34;</span><span class=nx>Students</span><span class=s>&#34;:[{&#34;</span><span class=nx>ID</span><span class=s>&#34;:1,&#34;</span><span class=nx>Name</span><span class=s>&#34;:&#34;</span><span class=nx>召唤师01</span><span class=s>&#34;},{&#34;</span><span class=nx>ID</span><span class=s>&#34;:2,&#34;</span><span class=nx>Name</span><span class=s>&#34;:&#34;</span><span class=nx>召唤师02</span><span class=s>&#34;},{&#34;</span><span class=nx>ID</span><span class=s>&#34;:3,&#34;</span><span class=nx>Name</span><span class=s>&#34;:&#34;</span><span class=nx>召唤师03</span><span class=s>&#34;},{&#34;</span><span class=nx>ID</span><span class=s>&#34;:4,&#34;</span><span class=nx>Name</span><span class=s>&#34;:&#34;</span><span class=nx>召唤师04</span><span class=s>&#34;},{&#34;</span><span class=nx>ID</span><span class=s>&#34;:5,&#34;</span><span class=nx>Name</span><span class=s>&#34;:&#34;</span><span class=nx>召唤师05</span><span class=s>&#34;},{&#34;</span><span class=nx>ID</span><span class=s>&#34;:6,&#34;</span><span class=nx>Name</span><span class=s>&#34;:&#34;</span><span class=nx>召唤师06</span><span class=s>&#34;},{&#34;</span><span class=nx>ID</span><span class=s>&#34;:7,&#34;</span><span class=nx>Name</span><span class=s>&#34;:&#34;</span><span class=nx>召唤师07</span><span class=s>&#34;},{&#34;</span><span class=nx>ID</span><span class=s>&#34;:8,&#34;</span><span class=nx>Name</span><span class=s>&#34;:&#34;</span><span class=nx>召唤师08</span><span class=s>&#34;},{&#34;</span><span class=nx>ID</span><span class=s>&#34;:9,&#34;</span><span class=nx>Name</span><span class=s>&#34;:&#34;</span><span class=nx>召唤师09</span><span class=err>&#34;</span><span class=p>}]}</span>
</code></pre></td></tr></table></div></div><h3 id=结构体json-反序列化>结构体JSON 反序列化</h3><ul><li>JSON格式的字符串 反序列化成 结构体</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// 定义一个 Student 的结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>student</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>ID</span>   <span class=kt>int</span>
	<span class=nx>Name</span> <span class=kt>string</span>
<span class=p>}</span>

<span class=c1>// 定义一个 student 的构造函数
</span><span class=c1></span><span class=kd>func</span> <span class=nf>newStudent</span><span class=p>(</span><span class=nx>id</span> <span class=kt>int</span><span class=p>,</span> <span class=nx>name</span> <span class=kt>string</span><span class=p>)</span> <span class=nx>student</span> <span class=p>{</span>
	<span class=k>return</span> <span class=nx>student</span><span class=p>{</span>
		<span class=nx>ID</span><span class=p>:</span>   <span class=nx>id</span><span class=p>,</span>
		<span class=nx>Name</span><span class=p>:</span> <span class=nx>name</span><span class=p>,</span>
	<span class=p>}</span>
<span class=p>}</span>

<span class=c1>// 定义一个 class 的结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>class</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>Title</span> <span class=kt>string</span>
	<span class=c1>// 定义个student字段,类型是 student结构体类型的切片
</span><span class=c1></span>	<span class=nx>Students</span> <span class=p>[]</span><span class=nx>student</span>
<span class=p>}</span>
<span class=c1>// 结构体 JSON 反序列化
</span><span class=c1></span><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// Json 反序列化  Json 字符串 --&gt; 结构体
</span><span class=c1></span>	<span class=nx>jsonStr</span> <span class=o>:=</span> <span class=s>`{&#34;Title&#34;: &#34;王者荣耀&#34;,&#34;Students&#34;: [{&#34;ID&#34;: 1,&#34;Name&#34;: &#34;召唤师01&#34;},{&#34;ID&#34;: 2,&#34;Name&#34;: &#34;召唤师02&#34;}]}`</span>
	<span class=c1>// 定义一个 class 实例化对象 c2
</span><span class=c1></span>	<span class=nx>c2</span> <span class=o>:=</span> <span class=nx>class</span><span class=p>{}</span>
	<span class=c1>// 这里需要传入 &amp;c2 必须要传入指针, 否则无法写入数据
</span><span class=c1></span>	<span class=nx>err</span> <span class=p>=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Unmarshal</span><span class=p>([]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>jsonStr</span><span class=p>),</span> <span class=o>&amp;</span><span class=nx>c2</span><span class=p>)</span>
	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;json Unmarshal failed err:&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>c2</span><span class=p>)</span>
<span class=p>}</span>

</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>main</span><span class=p>.</span><span class=nx>class</span><span class=p>{</span><span class=nx>Title</span><span class=p>:</span><span class=s>&#34;王者荣耀&#34;</span><span class=p>,</span> <span class=nx>Students</span><span class=p>:[]</span><span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>1</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;召唤师01&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>2</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;召唤师02&#34;</span><span class=p>}}}</span>
</code></pre></td></tr></table></div></div><h3 id=结构体标签-tag>结构体标签 (Tag)</h3><ul><li><p><code>Tag</code> 是结构体的元信息, 可以在运行的时候通过反射的机制读取出来。 <code>Tag</code>在结构体字段的后方定义, 由一对 `` 反引号包裹起来。</p></li><li><p>结构体标签由一个或多个键值对组成。键与值使用冒号<code>:</code>分隔, 值用双引号<code>""</code>括起来。键值对之间使用一个<code>空格</code>分隔。</p></li><li><p>注意事项: 为结构体编写<code>Tag</code>时, 必须严格遵守键值对的规则。结构体标签的解析代码的容错能力很差, 一旦格式写错, 编译和运行时都不会提示任何错误, 通过反射也无法正确取值。例如不要在<code>key</code>和<code>value</code>之间添加空格。</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// 定义一个 Student 的结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>student</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>ID</span>   <span class=kt>int</span>
	<span class=nx>Name</span> <span class=kt>string</span>
<span class=p>}</span>

<span class=c1>// 定义一个 student 的构造函数
</span><span class=c1></span><span class=kd>func</span> <span class=nf>newStudent</span><span class=p>(</span><span class=nx>id</span> <span class=kt>int</span><span class=p>,</span> <span class=nx>name</span> <span class=kt>string</span><span class=p>)</span> <span class=o>*</span><span class=nx>student</span> <span class=p>{</span>
	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>student</span><span class=p>{</span>
		<span class=nx>ID</span><span class=p>:</span>   <span class=nx>id</span><span class=p>,</span>
		<span class=nx>Name</span><span class=p>:</span> <span class=nx>name</span><span class=p>,</span>
	<span class=p>}</span>
<span class=p>}</span>

<span class=c1>// 定义一个 class 的结构体
</span><span class=c1>// 配置 tag, `输出格式:&#34;tag名&#34; 输出格式:&#34;tag名&#34;`
</span><span class=c1></span><span class=kd>type</span> <span class=nx>class</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>Title</span> <span class=kt>string</span> <span class=s>`json:&#34;title&#34; db:&#34;title&#34;`</span>
	<span class=c1>// 定义个student字段,类型是 student结构体类型的切片
</span><span class=c1></span>	<span class=nx>Students</span> <span class=p>[]</span><span class=nx>student</span> <span class=s>`json:&#34;student_slice&#34;`</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 实例化一个 class 的对象 c1
</span><span class=c1></span>	<span class=nx>c1</span> <span class=o>:=</span> <span class=nx>class</span><span class=p>{</span>
		<span class=nx>Title</span><span class=p>:</span> <span class=s>&#34;King glory&#34;</span><span class=p>,</span>
		<span class=c1>// student 字段是一个切片,所以需要先初始化才能使用
</span><span class=c1></span>		<span class=nx>Students</span><span class=p>:</span> <span class=nb>make</span><span class=p>([]</span><span class=nx>student</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>20</span><span class=p>),</span>
	<span class=p>}</span>
	<span class=c1>// 批量录入学生信息
</span><span class=c1></span>	<span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>1</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
		<span class=nx>tmpStu</span> <span class=o>:=</span> <span class=nf>newStudent</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;player%02d&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>))</span>
		<span class=c1>// 切片使用 append 函数追加 元素
</span><span class=c1></span>		<span class=nx>c1</span><span class=p>.</span><span class=nx>Students</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>c1</span><span class=p>.</span><span class=nx>Students</span><span class=p>,</span> <span class=o>*</span><span class=nx>tmpStu</span><span class=p>)</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v \n&#34;</span><span class=p>,</span> <span class=nx>c1</span><span class=p>)</span>
	<span class=c1>// 利用 json.Marshal 包序列化 这一组数据
</span><span class=c1></span>	<span class=c1>// 序列化因为调用的是外部的包，所以上面的 struct 跟 字段必须大写
</span><span class=c1></span>	<span class=nx>data</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Marshal</span><span class=p>(</span><span class=nx>c1</span><span class=p>)</span>
	<span class=c1>// 格式化 json 输出
</span><span class=c1></span>	<span class=c1>//data, err := json.MarshalIndent(c1, &#34;&#34;, &#34;&#34;)
</span><span class=c1></span>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;json marshal failed err:&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
		<span class=k>return</span>
	<span class=p>}</span>
	<span class=c1>// data 变量保存的数据类型为 byte 类型(uint8)
</span><span class=c1></span>	<span class=c1>// %s 会转换成 string 类型打印
</span><span class=c1></span>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s \n&#34;</span><span class=p>,</span> <span class=nx>data</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li>输出:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=nx>main</span><span class=p>.</span><span class=nx>class</span><span class=p>{</span><span class=nx>Title</span><span class=p>:</span><span class=s>&#34;King glory&#34;</span><span class=p>,</span> <span class=nx>Students</span><span class=p>:[]</span><span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>1</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;player01&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>2</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;player02&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>3</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;player03&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>4</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;player04&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>5</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;player05&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>6</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;player06&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>7</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;player07&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>8</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;player08&#34;</span><span class=p>},</span> <span class=nx>main</span><span class=p>.</span><span class=nx>student</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span><span class=mi>9</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span><span class=s>&#34;player09&#34;</span><span class=p>}}}</span>
<span class=c1>// 如下是打了 tag 以后 json 序列化后的输出
</span><span class=c1></span><span class=p>{</span><span class=s>&#34;title&#34;</span><span class=p>:</span><span class=s>&#34;King glory&#34;</span><span class=p>,</span><span class=s>&#34;student_slice&#34;</span><span class=p>:[{</span><span class=s>&#34;ID&#34;</span><span class=p>:</span><span class=mi>1</span><span class=p>,</span><span class=s>&#34;Name&#34;</span><span class=p>:</span><span class=s>&#34;player01&#34;</span><span class=p>},{</span><span class=s>&#34;ID&#34;</span><span class=p>:</span><span class=mi>2</span><span class=p>,</span><span class=s>&#34;Name&#34;</span><span class=p>:</span><span class=s>&#34;player02&#34;</span><span class=p>},{</span><span class=s>&#34;ID&#34;</span><span class=p>:</span><span class=mi>3</span><span class=p>,</span><span class=s>&#34;Name&#34;</span><span class=p>:</span><span class=s>&#34;player03&#34;</span><span class=p>},{</span><span class=s>&#34;ID&#34;</span><span class=p>:</span><span class=mi>4</span><span class=p>,</span><span class=s>&#34;Name&#34;</span><span class=p>:</span><span class=s>&#34;player04&#34;</span><span class=p>},{</span><span class=s>&#34;ID&#34;</span><span class=p>:</span><span class=mi>5</span><span class=p>,</span><span class=s>&#34;Name&#34;</span><span class=p>:</span><span class=s>&#34;player05&#34;</span><span class=p>},{</span><span class=s>&#34;ID&#34;</span><span class=p>:</span><span class=mi>6</span><span class=p>,</span><span class=s>&#34;Name&#34;</span><span class=p>:</span><span class=s>&#34;player06&#34;</span><span class=p>},{</span><span class=s>&#34;ID&#34;</span><span class=p>:</span><span class=mi>7</span><span class=p>,</span><span class=s>&#34;Name&#34;</span><span class=p>:</span><span class=s>&#34;player07&#34;</span><span class=p>},{</span><span class=s>&#34;ID&#34;</span><span class=p>:</span><span class=mi>8</span><span class=p>,</span><span class=s>&#34;Name&#34;</span><span class=p>:</span><span class=s>&#34;player08&#34;</span><span class=p>},{</span><span class=s>&#34;ID&#34;</span><span class=p>:</span><span class=mi>9</span><span class=p>,</span><span class=s>&#34;Name&#34;</span><span class=p>:</span><span class=s>&#34;player09&#34;</span><span class=p>}]}</span>

</code></pre></td></tr></table></div></div><h3 id=练习题>练习题</h3><ul><li>使用"面向对象"的思维方式编写一个学生信息管理系统。<ol><li>学生有id、姓名、年龄、分数等信息</li><li>程序提供展示学生列表、添加学生、编辑学生信息、删除学生等功能</li></ol></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=err>#</span> <span class=nx>student</span><span class=p>.</span><span class=k>go</span>

<span class=c1>// 创建一个 student 的结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>student</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>id</span>    <span class=kt>int</span>
	<span class=nx>name</span>  <span class=kt>string</span>
	<span class=nx>class</span> <span class=kt>string</span>
<span class=p>}</span>

<span class=c1>// 创建一个 student 的构造函数
</span><span class=c1></span><span class=kd>func</span> <span class=nf>newStudent</span><span class=p>(</span><span class=nx>id</span> <span class=kt>int</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>class</span> <span class=kt>string</span><span class=p>)</span> <span class=o>*</span><span class=nx>student</span> <span class=p>{</span>
	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>student</span><span class=p>{</span>
		<span class=nx>id</span><span class=p>:</span>    <span class=nx>id</span><span class=p>,</span>
		<span class=nx>name</span><span class=p>:</span>  <span class=nx>name</span><span class=p>,</span>
		<span class=nx>class</span><span class=p>:</span> <span class=nx>class</span><span class=p>,</span>
	<span class=p>}</span>
<span class=p>}</span>

<span class=c1>// 学员管理的结构体
</span><span class=c1></span><span class=kd>type</span> <span class=nx>studentMgr</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>allStudents</span> <span class=p>[]</span><span class=o>*</span><span class=nx>student</span>
<span class=p>}</span>

<span class=c1>// 创建一个 studentMgr 的构造函数
</span><span class=c1></span><span class=kd>func</span> <span class=nf>newStudentMgr</span><span class=p>()</span> <span class=o>*</span><span class=nx>studentMgr</span> <span class=p>{</span>
	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>studentMgr</span><span class=p>{</span>
		<span class=nx>allStudents</span><span class=p>:</span> <span class=nb>make</span><span class=p>([]</span><span class=o>*</span><span class=nx>student</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>100</span><span class=p>),</span>
	<span class=p>}</span>
<span class=p>}</span>

<span class=c1>// 添加 学生的方法
</span><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=o>*</span><span class=nx>studentMgr</span><span class=p>)</span> <span class=nf>addStudents</span><span class=p>(</span><span class=nx>newStu</span> <span class=o>*</span><span class=nx>student</span><span class=p>)</span> <span class=p>{</span>
	<span class=c1>// 使用 append 函数 往allStudents的切片中追加学生
</span><span class=c1></span>	<span class=nx>s</span><span class=p>.</span><span class=nx>allStudents</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>s</span><span class=p>.</span><span class=nx>allStudents</span><span class=p>,</span> <span class=nx>newStu</span><span class=p>)</span>
<span class=p>}</span>

<span class=c1>// 编辑 学生的方法
</span><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=o>*</span><span class=nx>studentMgr</span><span class=p>)</span> <span class=nf>editStudents</span><span class=p>(</span><span class=nx>newStu</span> <span class=o>*</span><span class=nx>student</span><span class=p>)</span> <span class=p>{</span>
	<span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>v</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>s</span><span class=p>.</span><span class=nx>allStudents</span> <span class=p>{</span>
		<span class=c1>// 判断传入的 id 是否等于 学员学号
</span><span class=c1></span>		<span class=k>if</span> <span class=nx>newStu</span><span class=p>.</span><span class=nx>id</span> <span class=o>==</span> <span class=nx>v</span><span class=p>.</span><span class=nx>id</span> <span class=p>{</span>
			<span class=c1>//根据切片的索引找到该学生信息,用新的学生信息覆盖
</span><span class=c1></span>			<span class=nx>s</span><span class=p>.</span><span class=nx>allStudents</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=p>=</span> <span class=nx>newStu</span>
			<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;修改学员成功&#34;</span><span class=p>)</span>
			<span class=k>return</span>
		<span class=p>}</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;没有找到 学号是: %d 的学生 \n&#34;</span><span class=p>,</span> <span class=nx>newStu</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span>
<span class=p>}</span>

<span class=c1>// 删除 学生的方法
</span><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=o>*</span><span class=nx>studentMgr</span><span class=p>)</span> <span class=nf>deleteStudents</span><span class=p>(</span><span class=nx>newStu</span> <span class=o>*</span><span class=nx>student</span><span class=p>)</span> <span class=p>{</span>
	<span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>v</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>s</span><span class=p>.</span><span class=nx>allStudents</span> <span class=p>{</span>
		<span class=c1>// 判断传入的 id 是否等于 学员学号
</span><span class=c1></span>		<span class=k>if</span> <span class=nx>newStu</span><span class=p>.</span><span class=nx>id</span> <span class=o>==</span> <span class=nx>v</span><span class=p>.</span><span class=nx>id</span> <span class=p>{</span>
			<span class=c1>// 利用append 函数删除切片中的元素 append(slice[:i],slice[i+1:]...)
</span><span class=c1></span>			<span class=nx>s</span><span class=p>.</span><span class=nx>allStudents</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>s</span><span class=p>.</span><span class=nx>allStudents</span><span class=p>[:</span><span class=nx>i</span><span class=p>],</span> <span class=nx>s</span><span class=p>.</span><span class=nx>allStudents</span><span class=p>[</span><span class=nx>i</span><span class=o>+</span><span class=mi>1</span><span class=p>:]</span><span class=o>...</span><span class=p>)</span>
			<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;删除学员成功&#34;</span><span class=p>)</span>
			<span class=k>return</span>
		<span class=p>}</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;没有找到 学号是: %d 的学生 \n&#34;</span><span class=p>,</span> <span class=nx>newStu</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span>
<span class=p>}</span>

<span class=c1>// 展示学生信息
</span><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=o>*</span><span class=nx>studentMgr</span><span class=p>)</span> <span class=nf>showStudents</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 使用 for range 循环 遍历 allStudents 切片
</span><span class=c1></span>	<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>v</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>s</span><span class=p>.</span><span class=nx>allStudents</span> <span class=p>{</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;学号: %d 姓名: %s 班级: %s \n&#34;</span><span class=p>,</span> <span class=nx>v</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span> <span class=nx>v</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span> <span class=nx>v</span><span class=p>.</span><span class=nx>class</span><span class=p>)</span>
	<span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=err>#</span> <span class=nx>main</span><span class=p>.</span><span class=k>go</span>

<span class=cm>/*
</span><span class=cm>学员管理系统需求:
</span><span class=cm>	1. 展示菜单
</span><span class=cm>	2. 添加学员信息
</span><span class=cm>	3. 编辑学员信息
</span><span class=cm>	4. 展示所有学员信息
</span><span class=cm>	5. 退出系统
</span><span class=cm>*/</span>
<span class=kd>func</span> <span class=nf>showMenu</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;欢迎来到学员管理系统&#34;</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;1. 添加学员信息&#34;</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;2. 编辑学员信息&#34;</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;3. 展示所有学员信息&#34;</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;4. 删除学员&#34;</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;5. 退出系统&#34;</span><span class=p>)</span>

<span class=p>}</span>

<span class=c1>// 获取用户输入的函数
</span><span class=c1></span><span class=kd>func</span> <span class=nf>getInput</span><span class=p>()</span> <span class=o>*</span><span class=nx>student</span> <span class=p>{</span>
	<span class=kd>var</span> <span class=p>(</span>
		<span class=nx>id</span>    <span class=kt>int</span>
		<span class=nx>name</span>  <span class=kt>string</span>
		<span class=nx>class</span> <span class=kt>string</span>
	<span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;请按照要求输入学员信息: &#34;</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;请输入学号:&#34;</span><span class=p>)</span>
	<span class=nx>_</span><span class=p>,</span> <span class=nx>_</span> <span class=p>=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Scanf</span><span class=p>(</span><span class=s>&#34;%d\n&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>id</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;请输入姓名:&#34;</span><span class=p>)</span>
	<span class=nx>_</span><span class=p>,</span> <span class=nx>_</span> <span class=p>=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Scanf</span><span class=p>(</span><span class=s>&#34;%s\n&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>name</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;请输入班级:&#34;</span><span class=p>)</span>
	<span class=nx>_</span><span class=p>,</span> <span class=nx>_</span> <span class=p>=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Scanf</span><span class=p>(</span><span class=s>&#34;%s\n&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>class</span><span class=p>)</span>
	<span class=c1>// 输入完以后~调用student的构造函数
</span><span class=c1></span>	<span class=nx>stu</span> <span class=o>:=</span> <span class=nf>newStudent</span><span class=p>(</span><span class=nx>id</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>class</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>stu</span><span class=p>)</span>
	<span class=k>return</span> <span class=nx>stu</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=c1>// 实例化一个 studentMgr
</span><span class=c1></span>	<span class=nx>m1</span> <span class=o>:=</span> <span class=nf>newStudentMgr</span><span class=p>()</span>
	<span class=k>for</span> <span class=p>{</span>
		<span class=kd>var</span> <span class=nx>input</span> <span class=kt>int</span>
		<span class=c1>// 1. 展示菜单
</span><span class=c1></span>		<span class=nf>showMenu</span><span class=p>()</span>
		<span class=c1>// 2. 获取用户输入:
</span><span class=c1></span>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;Please enter number:&#34;</span><span class=p>)</span>
		<span class=c1>// 利用 fmt.Scan 捕获用户的输入 &amp;input 变量需要传入指针
</span><span class=c1></span>		<span class=nx>_</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Scanf</span><span class=p>(</span><span class=s>&#34;%d\n&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>input</span><span class=p>)</span>
		<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
			<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Scan Failed err:&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
		<span class=p>}</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;用户输入的是: &#34;</span><span class=p>,</span> <span class=nx>input</span><span class=p>)</span>
		<span class=c1>// 3. 根据用户输入执行用户输入的操作
</span><span class=c1></span>		<span class=k>switch</span> <span class=nx>input</span> <span class=p>{</span>
		<span class=k>case</span> <span class=mi>1</span><span class=p>:</span>
			<span class=nx>stu</span> <span class=o>:=</span> <span class=nf>getInput</span><span class=p>()</span>
			<span class=nx>m1</span><span class=p>.</span><span class=nf>addStudents</span><span class=p>(</span><span class=nx>stu</span><span class=p>)</span>
		<span class=k>case</span> <span class=mi>2</span><span class=p>:</span>
			<span class=nx>stu</span> <span class=o>:=</span> <span class=nf>getInput</span><span class=p>()</span>
			<span class=nx>m1</span><span class=p>.</span><span class=nf>editStudents</span><span class=p>(</span><span class=nx>stu</span><span class=p>)</span>
		<span class=k>case</span> <span class=mi>3</span><span class=p>:</span>
			<span class=nx>m1</span><span class=p>.</span><span class=nf>showStudents</span><span class=p>()</span>
		<span class=k>case</span> <span class=mi>4</span><span class=p>:</span>
			<span class=nx>stu</span> <span class=o>:=</span> <span class=nf>getInput</span><span class=p>()</span>
			<span class=nx>m1</span><span class=p>.</span><span class=nf>deleteStudents</span><span class=p>(</span><span class=nx>stu</span><span class=p>)</span>
		<span class=k>case</span> <span class=mi>5</span><span class=p>:</span>
			<span class=nx>os</span><span class=p>.</span><span class=nf>Exit</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
		<span class=k>default</span><span class=p>:</span>
			<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;无效输入,请重新输入&#34;</span><span class=p>)</span>
			<span class=k>continue</span>
		<span class=p>}</span>
	<span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2000-01-01</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/golang-study-note-4-1/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://jicki.cn/golang-study-note-4-1/ data-title=Go学习笔记 data-via=jicki234 data-hashtags=golang><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://jicki.cn/golang-study-note-4-1/ data-hashtag=golang><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="分享到 WhatsApp" data-sharer=whatsapp data-url=https://jicki.cn/golang-study-note-4-1/ data-title=Go学习笔记 data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://jicki.cn/golang-study-note-4-1/ data-title=Go学习笔记><i data-svg-src=/lib/simple-icons/icons/line.min.svg></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://jicki.cn/golang-study-note-4-1/ data-title=Go学习笔记><i class="fab fa-weibo fa-fw"></i></a><a href=javascript:void(0); title="分享到 Myspace" data-sharer=myspace data-url=https://jicki.cn/golang-study-note-4-1/ data-title=Go学习笔记 data-description=Go学习笔记><i data-svg-src=/lib/simple-icons/icons/myspace.min.svg></i></a><a href=javascript:void(0); title="分享到 Blogger" data-sharer=blogger data-url=https://jicki.cn/golang-study-note-4-1/ data-title=Go学习笔记 data-description=Go学习笔记><i class="fab fa-blogger fa-fw"></i></a><a href=javascript:void(0); title="分享到 Evernote" data-sharer=evernote data-url=https://jicki.cn/golang-study-note-4-1/ data-title=Go学习笔记><i class="fab fa-evernote fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/golang/>golang</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/golang-study-note-4-2/ class=prev rel=prev title=Go学习笔记><i class="fas fa-angle-left fa-fw"></i>Go学习笔记</a>
<a href=/golang-study-note-3/ class=next rel=next title=Go学习笔记>Go学习笔记<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=valine class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://valine.js.org/>Valine</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.73.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2020</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://jicki.cn target=_blank>小炒肉</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp>粤ICP备20055633号</span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/valine/valine.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/katex/copy-tex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/lib/valine/Valine.min.js></script><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lunr/lunr.stemmer.support.min.js></script><script type=text/javascript src=/lib/lunr/lunr.zh.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/auto-render.min.js></script><script type=text/javascript src=/lib/katex/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/mhchem.min.js></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":50},"comment":{"valine":{"appId":"1LTTCvDe4Nt8XSdFzejtUsVF-gzGzoHsz","appKey":"cvpPM7sbgOw0pTXbh6YVKrjc","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@5.0.1/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"zh-cn","pageSize":10,"placeholder":"你的评论 ...","recordIP":true,"visitor":true}},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type=text/javascript src=/js/theme.min.js></script></body></html>